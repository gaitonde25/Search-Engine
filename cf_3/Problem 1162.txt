b'There are nn persons located on a plane. The ii-th person is located at the point (xi,yi)(xi,yi) and initially looks at the point (ui,vi)(ui,vi).'
b'At the same moment of time, all persons will start to rotate clockwise synchronously with the same angular speed. They will rotate until they do one full 360360-degree turn. '
b"It is said that persons AA and BB made eye contact if person AA looks in person BB's direction at the same moment when person BB looks in person AA's direction. If there is a person CC located between persons AA and BB, that will not obstruct AA and BB from making eye contact. A person can make eye contact with more than one person at the same time."
b'Calculate the number of pairs of persons that will make eye contact at least once during the rotation (including the initial moment).'
b'Input'
b'The first line contains one integer tt (1\xe2\x89\xa4t\xe2\x89\xa41041\xe2\x89\xa4t\xe2\x89\xa4104) \xe2\x80\x94 the number of test cases.'
b"The first line of each test case contains a single integer nn (1\xe2\x89\xa4n\xe2\x89\xa41051\xe2\x89\xa4n\xe2\x89\xa4105) \xe2\x80\x94 the number of persons. The following nn lines describe persons, each line containing four space-separated integers xi,yi,ui,vixi,yi,ui,vi (|xi|,|yi|,|ui|,|vi|\xe2\x89\xa4109|xi|,|yi|,|ui|,|vi|\xe2\x89\xa4109; xi\xe2\x89\xa0uixi\xe2\x89\xa0ui or yi\xe2\x89\xa0viyi\xe2\x89\xa0vi), where (xi,yixi,yi) are the coordinates of the point where the ii-th person is located and (uiui, vivi) are the coordinates of the point that the ii-th person looks at initially. Each person's location is unique in each test case."
b'The sum of nn over all test cases does not exceed 105105.'
b'Output'
b'For each test case, print one integer \xe2\x80\x94 the number of pairs of persons who will make eye contact at least once during the rotation, including the initial moment.'
Tags
geometry, hashing, number theory, *1700

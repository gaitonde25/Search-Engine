b'John has QQ closed intervals of consecutive 2K2K-bit numbers [li,ri][li,ri] and one 16-bit value vivi for each interval. (0\xe2\x89\xa4i<Q0\xe2\x89\xa4i<Q)'
b"John wants to implement a function F that maps 2K2K-bit numbers to 16-bit numbers in such a way that inputs from each interval are mapped to that interval's value. In other words: F(x)=vi,for every\xc2\xa00\xe2\x89\xa4i<Q, and every\xc2\xa0x\xe2\x88\x88[li,ri]F(x)=vi,for every\xc2\xa00\xe2\x89\xa4i<Q, and every\xc2\xa0x\xe2\x88\x88[li,ri] The output of F for other inputs is unimportant."
b'John wants to make his implementation of F fast so he has decided to use lookup tables. A single 2K2K-bit lookup table would be too large to fit in memory, so instead John plans to use two K-bit lookup tables, LSBTable and MSBTable. His implementation will look like this: F(x)=LSBTable[lowKBits(x)]&MSBTable[highKBits(x)]F(x)=LSBTable[lowKBits(x)]&MSBTable[highKBits(x)] In other words it returns the "bitwise and" of results of looking up the K least significant bits in LSBTable and the K most significant bits in MSBTable.'
b"John needs your help. Given KK, QQ and QQ intervals [li,ri][li,ri] and values vivi, find any two lookup tables which can implement F or report that such tables don't exist."
b'Input'
b'The first line contains two integers KK and QQ (1<=K<=161<=K<=16, 1<=Q<=2\xe2\x8b\x851051<=Q<=2\xe2\x8b\x85105).'
b'Each of the next QQ lines contains three integers lili, riri and vivi. ( 0\xe2\x89\xa4li\xe2\x89\xa4ri<22K0\xe2\x89\xa4li\xe2\x89\xa4ri<22K, 0\xe2\x89\xa4vi<2160\xe2\x89\xa4vi<216).'
b'Output'
b'On the first line output "possible" (without quotes) if two tables satisfying the conditions exist, or "impossible" (without quotes) if they don\'t exist.'
b'If a solution exists, in the next 2\xe2\x8b\x852K2\xe2\x8b\x852K lines your program should output all values of the two lookup tables (LSBTable and MSBTable) it found. When there are multiple pairs of tables satisfying the conditions, your program may output any such pair. '
b'On lines 1+i1+i output LSBTable[i]LSBTable[i]. (0\xe2\x89\xa4i<2K0\xe2\x89\xa4i<2K, 0\xe2\x89\xa4LSBTable[i]<2160\xe2\x89\xa4LSBTable[i]<216).'
b'On lines 1+2K+i1+2K+i output MSBTable[i]MSBTable[i]. (0\xe2\x89\xa4i<2K0\xe2\x89\xa4i<2K, 0\xe2\x89\xa4MSBTable[i]<2160\xe2\x89\xa4MSBTable[i]<216).'
Tags
bitmasks, *3000

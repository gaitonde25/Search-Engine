b'You are given nn patterns p1,p2,\xe2\x80\xa6,pnp1,p2,\xe2\x80\xa6,pn and mm strings s1,s2,\xe2\x80\xa6,sms1,s2,\xe2\x80\xa6,sm. Each pattern pipi consists of kk characters that are either lowercase Latin letters or wildcard characters (denoted by underscores). All patterns are pairwise distinct. Each string sjsj consists of kk lowercase Latin letters.'
b'A string aa matches a pattern bb if for each ii from 11 to kk either bibi is a wildcard character or bi=aibi=ai.'
b'You are asked to rearrange the patterns in such a way that the first pattern the jj-th string matches is p[mtj]p[mtj]. You are allowed to leave the order of the patterns unchanged.'
b'Can you perform such a rearrangement? If you can, then print any valid order.'
b'Input'
b'The first line contains three integers nn, mm and kk (1\xe2\x89\xa4n,m\xe2\x89\xa41051\xe2\x89\xa4n,m\xe2\x89\xa4105, 1\xe2\x89\xa4k\xe2\x89\xa441\xe2\x89\xa4k\xe2\x89\xa44)\xc2\xa0\xe2\x80\x94 the number of patterns, the number of strings and the length of each pattern and string.'
b'Each of the next nn lines contains a pattern\xc2\xa0\xe2\x80\x94 kk characters that are either lowercase Latin letters or underscores. All patterns are pairwise distinct.'
b'Each of the next mm lines contains a string\xc2\xa0\xe2\x80\x94 kk lowercase Latin letters, and an integer mtmt (1\xe2\x89\xa4mt\xe2\x89\xa4n1\xe2\x89\xa4mt\xe2\x89\xa4n)\xc2\xa0\xe2\x80\x94 the index of the first pattern the corresponding string should match.'
b'Output'
b'Print "NO" if there is no way to rearrange the patterns in such a way that the first pattern that the jj-th string matches is p[mtj]p[mtj].'
b'Otherwise, print "YES" in the first line. The second line should contain nn distinct integers from 11 to nn\xc2\xa0\xe2\x80\x94 the order of the patterns. If there are multiple answers, print any of them.'
Tags
bitmasks, data structures, dfs and similar, graphs, hashing, sortings, strings, *2300

b'Bob decided to take a break from calculus homework and designed a game for himself. '
b"The game is played on a sequence of piles of stones, which can be described with a sequence of integers s1,\xe2\x80\xa6,sks1,\xe2\x80\xa6,sk, where sisi is the number of stones in the ii-th pile. On each turn, Bob picks a pair of non-empty adjacent piles ii and i+1i+1 and takes one stone from each. If a pile becomes empty, its adjacent piles do not become adjacent. The game ends when Bob can't make turns anymore. Bob considers himself a winner if at the end all piles are empty."
b'We consider a sequence of piles winning if Bob can start with it and win with some sequence of moves.'
b'You are given a sequence a1,\xe2\x80\xa6,ana1,\xe2\x80\xa6,an, count the number of subsegments of aa that describe a winning sequence of piles. In other words find the number of segments [l,r][l,r] (1\xe2\x89\xa4l\xe2\x89\xa4r\xe2\x89\xa4n1\xe2\x89\xa4l\xe2\x89\xa4r\xe2\x89\xa4n), such that the sequence al,al+1,\xe2\x80\xa6,aral,al+1,\xe2\x80\xa6,ar is winning.'
b'Input'
b'Each test consists of multiple test cases. The first line contains a single integer tt (1\xe2\x89\xa4t\xe2\x89\xa43\xe2\x8b\x851051\xe2\x89\xa4t\xe2\x89\xa43\xe2\x8b\x85105) \xe2\x80\x94 the number of test cases. Description of the test cases follows.'
b'The first line of each test case contains a single integer nn (1\xe2\x89\xa4n\xe2\x89\xa43\xe2\x8b\x851051\xe2\x89\xa4n\xe2\x89\xa43\xe2\x8b\x85105).'
b'The second line of each test case contains nn integers a1,a2,\xe2\x80\xa6,ana1,a2,\xe2\x80\xa6,an (0\xe2\x89\xa4ai\xe2\x89\xa41090\xe2\x89\xa4ai\xe2\x89\xa4109).'
b'It is guaranteed that the sum of nn over all test cases does not exceed 3\xe2\x8b\x851053\xe2\x8b\x85105.'
b'Output'
b'Print a single integer for each test case \xe2\x80\x94 the answer to the problem.'
Tags
binary search, data structures, games, greedy, *2300

b'Piet Mondrian is an artist most famous for his minimalist works, consisting only of the four colors red, yellow, blue, and white. Most people attribute this to his style, but the truth is that his paint behaves in a very strange way where mixing two primary colors only produces another primary color!'
b'  A lesser known piece, entitled "Pretentious rectangles" '
b'A sequence of primary colors (red, yellow, blue) is mixed as follows. While there are at least two colors, look at the first two. If they are distinct, replace them with the missing color. If they are the same, remove them from the sequence. In the end, if there is one color, that is the resulting color. Otherwise, if the sequence is empty, we say the resulting color is white. Here are two example mixings:'
b'  '
b' \xc2\xa0 '
b'  '
b'Piet has a color palette with cells numbered from 11 to nn. Each cell contains a primary color or is empty. Piet is very secretive, and will not share his palette with you, so you do not know what colors belong to each cell.'
b'However, he did perform kk operations. There are four kinds of operations: '
b'  In a mix operation, Piet chooses a subset of cells and mixes their colors together in some order. The order is not necessarily by increasing indexes. He records the resulting color. Empty cells are skipped over, having no effect on the mixing process. The mixing does not change the color values stored in the cells.  In a RY operation, Piet chooses a subset of cells. Any red cells in this subset become yellow, and any yellow cells in this subset become red. Blue and empty cells remain unchanged.  In a RB operation, Piet chooses a subset of cells. Any red cells in this subset become blue, and any blue cells in this subset become red. Yellow and empty cells remain unchanged.  In a YB operation, Piet chooses a subset of cells. Any yellow cells in this subset become blue, and any blue cells in this subset become yellow. Red and empty cells remain unchanged. '
b'Piet only tells you the list of operations he performs in chronological order, the indexes involved, and the resulting color of each mix operation. For each mix operation, you also know the order in which the cells are mixed. Given this information, determine the color of each cell in the initial palette. That is, you should find one possible state of the palette (before any operations were performed), or say that the described situation is impossible.'
b'Input'
b'The first line contains two integers nn and kk (1\xe2\x89\xa4n,k\xe2\x89\xa410001\xe2\x89\xa4n,k\xe2\x89\xa41000)\xc2\xa0\xe2\x80\x94 the number of cells in the palette and the number of operations, respectively.'
b'The next kk lines describe the operations. The ii-th line begins with the name of the ii-th operation and an integer mm (1\xe2\x89\xa4m\xe2\x89\xa4n1\xe2\x89\xa4m\xe2\x89\xa4n)\xc2\xa0\xe2\x80\x94 the number of indexes involved. Then follow mm integers j1,\xe2\x80\xa6,jmj1,\xe2\x80\xa6,jm (1\xe2\x89\xa4ji\xe2\x89\xa4n1\xe2\x89\xa4ji\xe2\x89\xa4n)\xc2\xa0\xe2\x80\x94 the indexes of the operation. It is guaranteed that all jiji are distinct within an operation. If it is a mix operation, the indexes are listed in the order the colors are mixed, and the line also ends with a character representing the resulting color: "R" for red, "Y" for yellow, "B" for blue, and "W" for white.'
b'Output'
b'Output "YES" if a solution exists, or "NO" otherwise. You can print each character in any case (upper or lower).'
b'If the answer is "YES", on the next line output a string of length nn, consisting of characters "R", "Y", "B", and ".", representing the paint colors in the nn cells of the initial palette (red, yellow, blue, and empty, respectively). If there are multiple solutions, print any. You can print each character in any case (upper or lower).'
Tags
matrices, *3200

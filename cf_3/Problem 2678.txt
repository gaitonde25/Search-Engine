b'You are given an undirected graph consisting of nn vertices and mm edges.'
b'Recall that a cycle is a path that starts and ends in the same vertex. A cycle in a graph is called simple if it contains each vertex (except the starting and ending one) no more than once (the starting and the ending one is contained always twice). Note that loops are considered to be simple cycles.'
b'In one move you can choose any simple cycle in this graph and erase the edges corresponding to this cycle (corresponding vertices remain in the graph). It is allowed to erase the loop or two copies of the same edge (take a look at examples).'
b'Your problem is to apply some sequence of moves to obtain the graph without edges. It is not necessary to minimize the number of cycles. If it is impossible, print "NO".'
b'Input'
b'The first line of the input contains two integers nn and mm (1\xe2\x89\xa4n,m\xe2\x89\xa42\xe2\x8b\x851051\xe2\x89\xa4n,m\xe2\x89\xa42\xe2\x8b\x85105) \xe2\x80\x94 the number of vertices and the number of edges in the graph.'
b'The next mm lines contain edges of the graph. The ii-th line contains the ii-th edge xi,yixi,yi (1\xe2\x89\xa4xi,yi\xe2\x89\xa4n1\xe2\x89\xa4xi,yi\xe2\x89\xa4n), where xixi and yiyi are vertices connected by the ii-th edge. The graph can contain loops or multiple edges.'
b'Output'
b'If it is impossible to decompose the given graph into simple cycles, print "NO" in the first line.'
b'Otherwise print "YES" in the first line. In the second line print kk \xe2\x80\x94 the number of simple cycles in the graph decomposition.'
b"In the next kk lines print cycles themselves. The jj-th line should contain the jj-th cycle. First, print cjcj \xe2\x80\x94 the number of vertices in the jj-th cycle. Then print the cycle as a sequence of vertices. All neighbouring (adjacent) vertices in the printed path should be connected by an edge that isn't contained in other cycles."
Tags
*special problem, graphs

b'There are nn segments drawn on a plane; the ii-th segment connects two points (xi,1xi,1, yi,1yi,1) and (xi,2xi,2, yi,2yi,2). Each segment is non-degenerate, and is either horizontal or vertical \xe2\x80\x94 formally, for every i\xe2\x88\x88[1,n]i\xe2\x88\x88[1,n] either xi,1=xi,2xi,1=xi,2 or yi,1=yi,2yi,1=yi,2 (but only one of these conditions holds). Only segments of different types may intersect: no pair of horizontal segments shares any common points, and no pair of vertical segments shares any common points.'
b'We say that four segments having indices h1h1, h2h2, v1v1 and v2v2 such that h1<h2h1<h2 and v1<v2v1<v2 form a rectangle if the following conditions hold:'
b'  segments h1h1 and h2h2 are horizontal;  segments v1v1 and v2v2 are vertical;  segment h1h1 intersects with segment v1v1;  segment h2h2 intersects with segment v1v1;  segment h1h1 intersects with segment v2v2;  segment h2h2 intersects with segment v2v2. '
b'Please calculate the number of ways to choose four segments so they form a rectangle. Note that the conditions h1<h2h1<h2 and v1<v2v1<v2 should hold.'
b'Input'
b'The first line contains one integer nn (1\xe2\x89\xa4n\xe2\x89\xa450001\xe2\x89\xa4n\xe2\x89\xa45000) \xe2\x80\x94 the number of segments.'
b'Then nn lines follow. The ii-th line contains four integers xi,1xi,1, yi,1yi,1, xi,2xi,2 and yi,2yi,2 denoting the endpoints of the ii-th segment. All coordinates of the endpoints are in the range [\xe2\x88\x925000,5000][\xe2\x88\x925000,5000].'
b'It is guaranteed that each segment is non-degenerate and is either horizontal or vertical. Furthermore, if two segments share a common point, one of these segments is horizontal, and another one is vertical.'
b'Output'
b'Print one integer \xe2\x80\x94 the number of ways to choose four segments so they form a rectangle.'
Tags
bitmasks, brute force, data structures, geometry, sortings, *2200

b'A sequence of round and square brackets is given. You can change the sequence by performing the following operations:'
b"  change the direction of a bracket from opening to closing and vice versa without changing the form of the bracket: i.e. you can change '(' to ')' and ')' to '('; you can change '[' to ']' and ']' to '['. The operation costs 00 burles. change any square bracket to round bracket having the same direction: i.e. you can change '[' to '(' but not from '(' to '['; similarly, you can change ']' to ')' but not from ')' to ']'. The operation costs 11 burle. "
b'The operations can be performed in any order any number of times.'
b'You are given a string ss of the length nn and qq queries of the type "l r" where 1\xe2\x89\xa4l<r\xe2\x89\xa4n1\xe2\x89\xa4l<r\xe2\x89\xa4n. For every substring s[l\xe2\x80\xa6r]s[l\xe2\x80\xa6r], find the minimum cost to pay to make it a correct bracket sequence. It is guaranteed that the substring s[l\xe2\x80\xa6r]s[l\xe2\x80\xa6r] has an even length.'
b"The queries must be processed independently, i.e. the changes made in the string for the answer to a question ii don't affect the queries jj (j>ij>i). In other words, for every query, the substring s[l\xe2\x80\xa6r]s[l\xe2\x80\xa6r] is given from the initially given string ss."
b'A correct bracket sequence is a sequence that can be built according the following rules:'
b'  an empty sequence is a correct bracket sequence;  if "s" is a correct bracket sequence, the sequences "(s)" and "[s]" are correct bracket sequences.  if "s" and "t" are correct bracket sequences, the sequence "st" (the concatenation of the sequences) is a correct bracket sequence. '
b'E.g. the sequences "", "(()[])", "[()()]()" and "(())()" are correct bracket sequences whereas "(", "[(])" and ")))" are not.'
b'Input'
b'The first line contains one integer tt (1\xe2\x89\xa4t\xe2\x89\xa41001\xe2\x89\xa4t\xe2\x89\xa4100) \xe2\x80\x94 the number of test cases. Then tt test cases follow.'
b"For each test case, the first line contains a non-empty string ss containing only round ('(', ')') and square ('[', ']') brackets. The length of the string doesn't exceed 106106. The string contains at least 22 characters."
b'The second line contains one integer qq (1\xe2\x89\xa4q\xe2\x89\xa42\xe2\x8b\x851051\xe2\x89\xa4q\xe2\x89\xa42\xe2\x8b\x85105) \xe2\x80\x94 the number of queries.'
b'Then qq lines follow, each of them contains two integers ll and rr (1\xe2\x89\xa4l<r\xe2\x89\xa4n1\xe2\x89\xa4l<r\xe2\x89\xa4n where nn is the length of ss). It is guaranteed that the substring s[l\xe2\x80\xa6r]s[l\xe2\x80\xa6r] has even length.'
b"It is guaranteed that the sum of the lengths of all strings given in all test cases doesn't exceed 106106. The sum of all qq given in all test cases doesn't exceed 2\xe2\x8b\x851052\xe2\x8b\x85105."
b'Output'
b'For each test case output in a separate line for each query one integer xx (x\xe2\x89\xa50x\xe2\x89\xa50) \xe2\x80\x94 the minimum cost to pay to make the given substring a correct bracket sequence.'
Tags
constructive algorithms, data structures, dp, greedy, *2200

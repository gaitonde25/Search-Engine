b'For the simplicity, let\'s say that the "Death Note" is a notebook that kills a person when their name is written in it.'
b'It\'s easy to kill with it, but it\'s pretty hard to keep track of people you haven\'t killed and still plan to. You decided to make a "Death Database Management System"\xc2\xa0\xe2\x80\x94 a computer program that provides the easy access to the database of possible victims. Let me describe its specifications to you.'
b"Let's define a victim entity: a victim has a name (not necessarily unique) that consists only of lowercase Latin letters and an integer suspicion value."
b'At the start of the program the user enters a list of nn victim names into a database, each suspicion value is set to 00.'
b'Then the user makes queries of two types: '
b'  1\xc2\xa0i\xc2\xa0x1\xc2\xa0i\xc2\xa0x\xc2\xa0\xe2\x80\x94 set the suspicion value of the ii-th victim to xx;  2\xc2\xa0q2\xc2\xa0q\xc2\xa0\xe2\x80\x94 given a string qq find the maximum suspicion value of a victim whose name is a contiguous substring of qq. '
b"Just to remind you, this program doesn't kill people, it only helps to search for the names to write down in an actual notebook. Thus, the list of the victims in the database doesn't change throughout the queries."
b'What are you waiting for? Write that program now!'
b'Input'
b'The first line contains two integers nn and mm (1\xe2\x89\xa4n,m\xe2\x89\xa43\xe2\x8b\x851051\xe2\x89\xa4n,m\xe2\x89\xa43\xe2\x8b\x85105)\xc2\xa0\xe2\x80\x94 the number of victims and the number of queries, respectively.'
b'Each of the next nn lines contains a single string sisi\xc2\xa0\xe2\x80\x94 the name of the ii-th victim. Each name consists only of lowercase Latin letters.'
b'Each of the next mm lines contains a query of one of two types: '
b'  1\xc2\xa0i\xc2\xa0x1\xc2\xa0i\xc2\xa0x (1\xe2\x89\xa4i\xe2\x89\xa4n1\xe2\x89\xa4i\xe2\x89\xa4n, 0\xe2\x89\xa4x\xe2\x89\xa41090\xe2\x89\xa4x\xe2\x89\xa4109)\xc2\xa0\xe2\x80\x94 change the suspicion value of the ii-th victim to xx;  2\xc2\xa0q2\xc2\xa0q\xc2\xa0\xe2\x80\x94 given a string qq consisting only of lowercase Latin letters find the maximum suspicion value of a victim whose name is a contiguous substring of qq. '
b"There is at least one query of the second type. The total length of the strings sisi doesn't exceed 3\xe2\x8b\x851053\xe2\x8b\x85105. The total length of the strings qq doesn't exceed 3\xe2\x8b\x851053\xe2\x8b\x85105. "
b'Output'
b'For each query of the second type print an integer value. If there is no victim name that is a contiguous substring of qq, then print \xe2\x88\x921\xe2\x88\x921. Otherwise, print the maximum suspicion value of a victim whose name is a contiguous substring of qq.'
Tags
data structures, string suffix structures, strings, trees, *2600
